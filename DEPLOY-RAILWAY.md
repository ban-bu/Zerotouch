# Railwayéƒ¨ç½²è§£å†³502é”™è¯¯ - æœ€æ–°æ–¹æ¡ˆ

## ğŸš¨ å½“å‰çŠ¶æ€
- **é—®é¢˜**ï¼šnginxç‰ˆæœ¬ä»æœ‰502é”™è¯¯
- **è§£å†³æ–¹æ¡ˆ**ï¼šå·²åˆ‡æ¢åˆ°Node.js serveæ–¹æ¡ˆ
- **çŠ¶æ€**ï¼šæœ¬åœ°æµ‹è¯•é€šè¿‡ âœ…

## ğŸ“‹ å·²å®Œæˆçš„ä¿®å¤

### 1. åˆ‡æ¢åˆ°Node.js serve
- æ·»åŠ `serve`ä¾èµ–åˆ°package.json
- åˆ›å»ºæç®€Dockerfileä½¿ç”¨serveä»£æ›¿nginx
- æœ¬åœ°æµ‹è¯•éªŒè¯serveæ­£å¸¸å·¥ä½œ

### 2. ä¼˜åŒ–é…ç½®
- å‡å°‘å¥åº·æ£€æŸ¥è¶…æ—¶æ—¶é—´ï¼ˆ300s â†’ 60sï¼‰
- å‡å°‘é‡è¯•æ¬¡æ•°ï¼ˆ5æ¬¡ â†’ 3æ¬¡ï¼‰
- ç®€åŒ–Dockeræ„å»ºè¿‡ç¨‹

## ğŸ”§ å½“å‰è§£å†³æ–¹æ¡ˆ

### Dockerfile.railway (å½“å‰ç”Ÿæ•ˆ)
```dockerfile
FROM node:18-alpine
WORKDIR /app
RUN apk add --no-cache curl
COPY package*.json ./
RUN npm ci --silent
COPY . .
RUN npm run build
EXPOSE 8080
HEALTHCHECK --interval=30s --timeout=10s --start-period=10s --retries=3 \
    CMD curl -f http://localhost:8080/ || exit 1
CMD ["npx", "serve", "-s", "dist", "-l", "8080"]
```

### å…³é”®ä¼˜åŠ¿
1. **ç®€å•å¯é **ï¼šNode.js serveæ˜¯ä¸“é—¨ä¸ºé™æ€æ–‡ä»¶è®¾è®¡çš„
2. **æ— æƒé™é—®é¢˜**ï¼šä¸æ¶‰åŠnginxçš„å¤æ‚æƒé™é…ç½®
3. **Railwayå…¼å®¹**ï¼šå®Œå…¨é€‚é…Railwayå¹³å°è¦æ±‚
4. **æœ¬åœ°éªŒè¯**ï¼šå·²åœ¨æœ¬åœ°æˆåŠŸæµ‹è¯•

## ğŸš€ ç«‹å³éƒ¨ç½²

1. **æ¨é€æ›´æ–°**ï¼š
   ```bash
   git add .
   git commit -m "fix: ä½¿ç”¨Node.js serveè§£å†³502é”™è¯¯"
   git push
   ```

2. **ç›‘æ§éƒ¨ç½²**ï¼š
   - æŸ¥çœ‹Railwayæ„å»ºæ—¥å¿—
   - ç¡®è®¤serveå¯åŠ¨æˆåŠŸ
   - éªŒè¯åº”ç”¨è®¿é—®

## ğŸ” é¢„æœŸæ—¥å¿—
æˆåŠŸéƒ¨ç½²ååº”è¯¥çœ‹åˆ°ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚   Serving!                                      â”‚
â”‚                                                 â”‚
â”‚   - Local:            http://localhost:8080     â”‚
â”‚   - Network:          http://0.0.0.0:8080       â”‚
â”‚                                                 â”‚
â”‚   Copied local address to clipboard!            â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ†˜ å¦‚æœä»æœ‰é—®é¢˜

### å¤‡ç”¨æ–¹æ¡ˆA - ä½¿ç”¨æ›´ç®€å•çš„Dockerfile
å¯ä»¥åˆ‡æ¢åˆ°`Dockerfile.serve`ï¼š
```json
// railway.json
{
  "build": {
    "dockerfilePath": "Dockerfile.serve"
  }
}
```

### å¤‡ç”¨æ–¹æ¡ˆB - ä½¿ç”¨Viteé¢„è§ˆæœåŠ¡å™¨
ä¿®æ”¹package.jsonï¼š
```json
{
  "scripts": {
    "start": "vite preview --port 8080 --host 0.0.0.0"
  }
}
```

### å¤‡ç”¨æ–¹æ¡ˆC - çº¯é™æ€éƒ¨ç½²
å¦‚æœDockerä»æœ‰é—®é¢˜ï¼Œè€ƒè™‘ä½¿ç”¨Railwayçš„é™æ€ç«™ç‚¹éƒ¨ç½²ï¼š
1. åœ¨Railwayä¸­é€‰æ‹©"Deploy from GitHub"
2. é€‰æ‹©"Static Site"è€Œä¸æ˜¯"Docker"
3. è®¾ç½®æ„å»ºå‘½ä»¤ï¼š`npm ci && npm run build`
4. è®¾ç½®è¾“å‡ºç›®å½•ï¼š`dist`

## ğŸ“Š å¯¹æ¯”åˆ†æ

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|---------|
| nginx | æ€§èƒ½æœ€ä¼˜ | é…ç½®å¤æ‚ï¼Œæƒé™é—®é¢˜ | â­â­ |
| serve | ç®€å•å¯é  | æ€§èƒ½ç•¥ä½ | â­â­â­â­â­ |
| vite preview | å¼€å‘å‹å¥½ | ä¸é€‚åˆç”Ÿäº§ | â­â­â­ |
| é™æ€éƒ¨ç½² | æœ€ç®€å• | åŠŸèƒ½æœ‰é™ | â­â­â­â­ |

## ğŸ¯ æ¨èæ“ä½œ
1. **ç«‹å³å°è¯•**ï¼šæ¨é€å½“å‰serveæ–¹æ¡ˆ
2. **å¦‚æœæˆåŠŸ**ï¼šç›‘æ§æ€§èƒ½è¡¨ç°
3. **å¦‚æœå¤±è´¥**ï¼šå°è¯•å¤‡ç”¨æ–¹æ¡ˆA
4. **æœ€åé€‰æ‹©**ï¼šé™æ€ç«™ç‚¹éƒ¨ç½²

å½“å‰çš„serveæ–¹æ¡ˆå·²ç»æœ¬åœ°éªŒè¯æˆåŠŸï¼Œåº”è¯¥èƒ½è§£å†³502é”™è¯¯ï¼







